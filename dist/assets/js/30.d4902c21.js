(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{501:function(s,n,a){s.exports=a.p+"assets/img/v8.22a55c7a.png"},611:function(s,n,a){"use strict";a.r(n);var e=a(5),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h3",{attrs:{id:"来源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#来源"}},[s._v("#")]),s._v(" 来源")]),s._v(" "),e("p",[s._v("JavaScript 是一款拥有「自动垃圾回收」功能的编程语言。")]),s._v(" "),e("p",[s._v("市面上具有这样功能的语言，一般都是拥有相对应的虚拟机的，像 Java的JVM ，C#的CLR ，PHP的Zend。")]),s._v(" "),e("p",[s._v("虚拟机一般实现了代码解析，内存的管理、布局、垃圾回收等功能。")]),s._v(" "),e("p",[s._v("不像C/C++这种没有虚拟机的语言，它们需要手动管理内存。")]),s._v(" "),e("p",[s._v("C/C++语言编译后的文件，是可以直接运行的。")]),s._v(" "),e("p",[s._v("我认为学习一门开发语言，除了知道一些语法上的使用，各种API的调用以外。学习相应的虚拟机也是很有必要的。")]),s._v(" "),e("p",[s._v("而 JavaScript 由于其特殊的历史原因，并不是只有 V8 一个引擎。")]),s._v(" "),e("p",[s._v("但是目前 V8 它是业界最优秀的 JavaScript 引擎，也就成为了一个学习样本")]),s._v(" "),e("p",[s._v("如今的 JavaScript 不仅仅是用在浏览器端了，也因为 NodeJS 的关系得以在服务器端运行。")]),s._v(" "),e("p",[s._v("和浏览器端不同的地方在于服务器端对资源的敏感性是很高的。")]),s._v(" "),e("p",[s._v("当业务规模大了，并发量上来了，一些很细小的问题会放大。这时候一些小小的内存泄漏，都会酿造灾难。")]),s._v(" "),e("p",[s._v("所以作为一个 JavaScript 开发者，搞清楚从敲入 console.log('hello world') ，直到后面交由CPU执行的中间过程是很重要的")]),s._v(" "),e("h3",{attrs:{id:"v8-概述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v8-概述"}},[s._v("#")]),s._v(" V8 概述")]),s._v(" "),e("p",[s._v("V8 作为一个 JavaScript 引擎，最初是服役于 Google Chrome 浏览器的。")]),s._v(" "),e("p",[s._v("它随着 Chrome 的第一版发布而发布以及开源。")]),s._v(" "),e("p",[s._v("现在它除了 Chrome 浏览器，已经有很多其他的使用者了。诸如 NodeJS、MongoDB、CouchDB 等")]),s._v(" "),e("p",[s._v("JavaScript 作为 Prototype Based Language , 基于它使用 Prototype 继承的特征，V8 使用了直译的方式")]),s._v(" "),e("p",[s._v("即把 JavaScript 代码直接编译成机器码( Machine Code, 有些地方也叫 Native Code )，然后直接交由硬件执行。")]),s._v(" "),e("p",[s._v("与传统的「编译-解析-执行」的流程不同，V8 处理 JavaScript，并没有二进制码或其他的中间码。")]),s._v(" "),e("p",[s._v("简单来说，V8主要工作就是：「把 JavaScript 直译成机器码，然后运行」")]),s._v(" "),e("p",[s._v("但这中间，往往是一个复杂的过程，它需要处理很多的难题，诸如：")]),s._v(" "),e("ul",[e("li",[s._v("1.编译优化")]),s._v(" "),e("li",[s._v("2.内存管理")]),s._v(" "),e("li",[s._v("3.垃圾回收")])]),s._v(" "),e("h3",{attrs:{id:"nodejs中是如何引入v8的"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nodejs中是如何引入v8的"}},[s._v("#")]),s._v(" Nodejs中是如何引入V8的")]),s._v(" "),e("blockquote",[e("p",[s._v("我们关注Node的源码目录")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(".\n├── ...\n├── deps\n│   ├── ...\n│   ├── v8\n│   ├── ...\n├── ...\n├── lib\n│   ├── ...\n│   ├── buffer.js\n│   ├── child_process.js\n│   ├── console.js\n│   ├── ...\n├── node -> out/Release/node\n├── ...\n├── out\n│   ├── ...\n│   ├── Release\n|         ├── node\n|         ├── node.d\n|         ├── obj\n|             └── gen\n|                 ├── ...\n|                 ├── node_natives.h\n|                 ├── ...\n│   ├── ...\n├── src\n│   ├── ...\n│   ├── debug-agent.cc\n│   ├── debug-agent.h\n│   ├── env-inl.h\n│   ├── env.cc\n│   ├── ...\n├── \n...\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br")])]),e("h4",{attrs:{id:"需要关注的几个目录和文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#需要关注的几个目录和文件"}},[s._v("#")]),s._v(" 需要关注的几个目录和文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("/deps/v8\n\t这里是V8源码所在文件夹，你会发现里面的目录结构跟 V8源码 十分相似。\n\tNodeJS除了移植V8源码，还在增添了一些内容。\n\t\n/src\n\t由C/C++编写的核心模块所在文件夹，由C/C++编写的这部分模块被称为「Builtin Module」\n\t\n/lib\n\t由JavaScript编写的核心模块所在文件夹，这部分被称为「Native Code」，\n\t在编译Node源码的时候，会采用V8附带的 js2c.py 工具，\n\t把所有内置的JavaScript代码转换成C++里面的数组，生成 out/Release/obj/gen/node_natives.h 文件。\n\t有些 Native Module 需要借助于 Builtin Module 实现背后的功能。\n\t\n/out\n\t该目录是Node源码编译(命令行运行 make )后生成的目录，里面包含了Node的可执行文件。\n\t当在命令行中键入 node xxx.js ，实际就是运行了 out/Release/node 文件。\n\t\n来张图说明一下V8在Node运行时的整体过程\n\nNode在启动的时候，就已经把 Native Module，Builtin Module 加载到内存里面了。\n后来的 JavaScript 代码，就需要通过 V8 进行动态编译解析运行。\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br")])]),e("p",[e("img",{attrs:{src:a(501),alt:"v8"}})]),s._v(" "),e("p",[e("a",{attrs:{href:"https://segmentfault.com/a/1190000014722508?utm_source=index-hottest",target:"_blank",rel:"noopener noreferrer"}},[s._v("转载：https://segmentfault.com/a/1190000014722508?utm_source=index-hottest"),e("OutboundLink")],1)])])}),[],!1,null,null,null);n.default=t.exports}}]);