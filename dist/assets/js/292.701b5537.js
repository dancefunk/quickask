(window.webpackJsonp=window.webpackJsonp||[]).push([[292],{852:function(s,t,a){"use strict";a.r(t);var n=a(4),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"什么是会话控制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是会话控制"}},[s._v("#")]),s._v(" 什么是会话控制")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[s._v("为了使得网站可以跟踪客户端与服务器之间的交互"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("保存和记忆每个用户的身份和信息\n我们需要一种强有力的解决方案"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("这样就产生了会话控制\n\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTTP")]),s._v("是一个无状态的协议"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("此协议无法来维护两个事务之间的联系\n当一个用户请求一个页面后再请求另外一个页面时"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTTP")]),s._v("无法告诉我们这两个请求是来自同一个人\n\n会话控制思想就是能够在网站中跟踪一个变量"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("我们可以跟踪变量就可以做到对用户的支持\n并根据授权和用户身份显示不同内容不同页面\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[s._v("#")]),s._v(" cookie")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[s._v("cookie是在http协议下"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("服务器或脚本可以维护客户端信息的一种方式。\ncookie是web服务器保存在用户浏览器上的小甜饼"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("一个很小的文本文件"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("。\n它可以包含有关用户的信息"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("常用于保存用户名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("密码"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("个性化设置"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("个人偏好记录等。\n当用户访问服务器时"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("服务器可以设置和访问cookie的信息。\ncookie保存在客户端"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("通常是"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("IE")]),s._v("或Firefox浏览器的cookie临时文件夹中"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("可以手动删除。\nCookie是利用了网页代码中的"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTTP")]),s._v("头信息进行传递的"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("浏览器的每一次网页请求"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("都可以伴随Cookie传递。\n注意"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("如果浏览器上cookie 太多"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("超过了系统所允许的范围"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("浏览器也会手动对它进行删除。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"cookie-工作原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie-工作原理"}},[s._v("#")]),s._v(" cookie 工作原理")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[s._v("当客户访问某个基于"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PHP")]),s._v("技术的网站时"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("在"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PHP")]),s._v("中可以使用setcookie函数生成一个cookie"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("\n系统经处理把这个cookie发送到客户端并保存在"),a("span",{pre:!0,attrs:{class:"token argument-name"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\\Documents "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("and")]),s._v(" Settings\\用户名\\Cookies目录下。\n \ncookie是"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTTP")]),s._v("头的一部分"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("因此"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setcookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("函数必须在"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTML")]),s._v("本身的任何内容送到浏览器之前调用。\n这种限制与header函数一样。\n \n当客户再次访问该网站时。\n浏览器会自动把"),a("span",{pre:!0,attrs:{class:"token argument-name"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\\Documents "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("and")]),s._v(" Settings\\用户名\\Cookies目录下与该站点对应的cookie发送到服务器"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("\n服务器则把从客户端传来的cookie将自动地转化成一个"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PHP")]),s._v("变量。\n在"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PHP")]),s._v("中"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("客户端发来的cookie将被转换成全局变量。可以通过"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$_COOKIE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'xxx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("读取\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h3",{attrs:{id:"设置cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置cookie"}},[s._v("#")]),s._v(" 设置cookie")]),s._v(" "),a("blockquote",[a("p",[s._v("setcookie(name,value,expire,path,domain,secure)")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[s._v("参数")]),s._v(" "),a("th",{staticStyle:{"text-align":"left"}},[s._v("描述")])])]),s._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("name")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("设置cookie的名字.(必须)")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("value")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("设置cookie的值")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("expire")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("可选。规定 cookie 的过期时间。")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("path")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("可选。规定 cookie 的服务器路径")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("domain")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("可选。规定 cookie 的域名")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("secure")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("可选")])])])]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setcookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"username"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"admin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"获取cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取cookie"}},[s._v("#")]),s._v(" 获取cookie")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PHP")]),s._v("对cookie有很好的支持"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("和form表单一样"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("\n在接收的时候"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PHP")]),s._v("会自动从web服务器接收"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTTP")]),s._v("头并且分析它。接收的时候和表单接收一样    \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$_COOKIE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"username"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("     \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"删除cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除cookie"}},[s._v("#")]),s._v(" 删除cookie")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[s._v("调用只带有name参数的setcookie"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("那么名为这个cookie将被从客户机上删除"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n例"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setcookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"username"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n设置Cookie的失效时间为"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("或"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setcookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"username"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("减多少没有关系"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("只要是过期时间就行。\n那么这个Cookie在这个页面的浏览完之后就被删除了"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("其实是失效了"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("。 \n当这个Cookie被删除时"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("它的值在当前页仍然有效。\n\n如果要把cookie设置成在浏览器关闭后就失效。那么可以直接把expiretime设为"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("或者不设置此值。\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setcookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"value"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h3",{attrs:{id:"使用cookie注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用cookie注意事项"}},[s._v("#")]),s._v(" 使用Cookie注意事项")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setcookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("之前不能有任何html输出"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("就是空格"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("空白行都不行。       \n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setcookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("后"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("在当前页调用"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$_COOKIE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("不会有输出。必须刷新或到下一个页面才可以看到cookie值。\n使用cookie的限制。一个浏览器能创建的cookie数量最多为"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),s._v("个"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("并且每个不能超过"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("KB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n每个"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("WEB")]),s._v("站点能设置的cookie总数不能超过"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("个。\ncookie是保存在客户端的"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("用户禁用了cookie"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("你的cookie自然也就没作用啦"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"cookie跨域共享"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie跨域共享"}},[s._v("#")]),s._v(" Cookie跨域共享")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[s._v("将cookie传递给不同域名上面进行跨域共享操作\n新建两个虚拟主机分别是：\n\nwww.a.com\nwww.b.com\n\nwww.a.com/a.php\n"),a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setcookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"name-1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3600")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"a.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setcookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"name-2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3600")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('".a.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setcookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"name-3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3600")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"b.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setcookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"name-4"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3600")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('".b.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("?>")])]),s._v("\n\n设置name在b.com服务器上面访问，并且通过安全的 HTTPS 连接来传输 cookie\n\nwww.b.com/b.php\n"),a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("include")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'../a/a.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("var_dump")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$_COOKIE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("?>")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("h3",{attrs:{id:"session"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#session"}},[s._v("#")]),s._v(" SESSION")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[s._v("Session从用户访问页面开始"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("到断开与网站连接为止"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("形成一个会话的生命周期。\n在会话期间"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 分配客户唯一的一个SessionID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("用来标识当前用户"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("与其他用户进行区分。\n \nSession会话时"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("SessionID会分别保存在客户端和服务器端两个位置"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n对于客户端使用临时的Cookie保存"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Cookie名称为"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PHPSESSID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("或者通过"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("URL")]),s._v("字符串传递"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n服务器端也以文本文件形式保存在指定的Session目录中。\n \nSession通过"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ID")]),s._v("接受每个访问请求"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n从而识别当前用户、跟踪和保持用户具体资料"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("以及Session变量"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n比如session_name等等"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("这些变量信息保存在服务器端。\n \nSessionID可以作为会话信息保存到数据库中"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("进行Session持久化"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n这样可以跟踪每个用户的登陆次数、在线与否、在线时间等。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h3",{attrs:{id:"使用会话的基本步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用会话的基本步骤"}},[s._v("#")]),s._v(" 使用会话的基本步骤")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[s._v("开始会话 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 注册会话变量 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 使⽤会话变量 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 注销变量并销毁会话 \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"开始会话"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始会话"}},[s._v("#")]),s._v(" 开始会话")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("session_start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 开始一个会话或者返回已经存在的会话。\n \n说明"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("这个函数没有参数"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("且返回值均为"),a("span",{pre:!0,attrs:{class:"token constant boolean"}},[s._v("true")]),s._v("。\n如果你使用基于cookie的session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("那么在使用"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("session_start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("之前浏览器不能有任何输出"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n否则会发生以下错误"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token argument-name"}},[s._v("Warning")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Cannot send session cache limiter "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" headers already "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sent \n")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("output started at "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("www"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("html"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("test"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token argument-name"}},[s._v("php")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n \n也可以在php"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("ini中启动session"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("auto_start"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n这样就无需每次使用session之前都要调用"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("session_start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("。\n启用此指令的缺点是无法在会话中存储对象"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("因为定义要在会话开始之前加载才能重新创建对象。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"注册、使用会话变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注册、使用会话变量"}},[s._v("#")]),s._v(" 注册、使用会话变量")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PHP5")]),s._v("使用"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$_SESSION")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'xxx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxx 注册"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SESSION")]),s._v("全局变量。和"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("GET")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("POST")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("COOKIE")]),s._v("的使用方法相似\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("session_start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$_SESSION")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'username'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"张三"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"注销会话变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注销会话变量"}},[s._v("#")]),s._v(" 注销会话变量")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("session_start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unset")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$_SESSION")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'username'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"销毁会话"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#销毁会话"}},[s._v("#")]),s._v(" 销毁会话")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("session_unset")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("函数清除存储在当前会话中的所有变量"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("它能有效地将会话重置为创建时的状态。\n \n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("session_destroy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("函数从存储机制中完全删除会话"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("使当前会话失效。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"如何存储session信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何存储session信息"}},[s._v("#")]),s._v(" 如何存储session信息")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[s._v("session"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("save_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tmp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("     设为文件时"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" session文件保存的路径\nsession"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("use_cookies "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("     是否使用cookies\nsession"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PHPSESSID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("     在cookie的session的名字\nsession"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("auto_start "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("      是否自动启动session\nsession"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("cookie_lifetime "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  设置会话cookie的有效期"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("以秒为单位"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("为"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("时表示直到浏览器被重启\nsession"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("cookie_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("     cookie的有效路径\nsession"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("cookie_domain "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("     cookie的有效域\nsession"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("cache_expire "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("180")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   设置缓存中的会话文档在 n 分钟后过时\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"session同服务器跨域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#session同服务器跨域"}},[s._v("#")]),s._v(" session同服务器跨域")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[s._v("将session传递给不同域名上面进行跨域共享操作\n新建两个虚拟主机分别是：\n\nwww.a.com\nwww.b.com\n\nwww.a.com/a.php\n"),a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("session_start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$currentSessionID")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("session_id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$_SESSION")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'name'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'Alan Scott'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$str")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string heredoc-string"}},[a("span",{pre:!0,attrs:{class:"token delimiter symbol"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<<<")]),s._v("DOF")]),s._v('\n<a target="_blank" href="http://b.com/b.php?session='),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$currentSessionID")])]),s._v('">跳转</a>\n'),a("span",{pre:!0,attrs:{class:"token delimiter symbol"}},[s._v("DOF"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")])])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$str")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("?>")])]),s._v("\n\nwww.b.com/b.php\n"),a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$currentSessionID")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$_GET")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'session'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("session_id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$currentSessionID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("session_start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("empty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$_SESSION")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'name'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$_SESSION")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'name'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'Session did not work.'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("?>")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br")])]),a("h3",{attrs:{id:"cookie和session的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie和session的区别"}},[s._v("#")]),s._v(" cookie和session的区别")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[s._v("cookie和session都可以暂时保存多个页面中使用的变量。\n \n但是它们有本质的差别"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\tcookie 存放在客户端浏览器中\n\tsession 保存在服务器上\n \n它们之间的联系是sessionID一般保存在cookie中"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("或者放在"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("URL")]),s._v("上。\n \n当客户端禁用cookie时"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("session_id将无法传递"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 此时session失效。\n\n不过php5在linux"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("unix平台可以自动检查cookie状态"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("如果客户端设置了禁用"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n则系统自动把session_id附加到url上传递。windows主机则无此功能\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);