(window.webpackJsonp=window.webpackJsonp||[]).push([[344],{915:function(e,s,a){"use strict";a.r(s);var t=a(4),n=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h3",{attrs:{id:"获取请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取请求"}},[e._v("#")]),e._v(" 获取请求")]),e._v(" "),a("p",[e._v("要通过依赖注入的方式来获取当前 HTTP 请求的实例，你应该在控制器方法中引入 "),a("code",[e._v("Illuminate\\Http\\Request")]),e._v(" 类。传入的请求实例将通过 服务容器 自动注入:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<?php\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Http\\Request;\n\nclass UserController extends Controller\n{\n    /**\n     * 存储一个新的用户。\n     *\n     * @param  Request  $request\n     * @return Response\n     */\n    public function store(Request $request)\n    {\n        $name = $request->input('name');\n\n        //\n    }\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br")])]),a("h3",{attrs:{id:"依赖注入-路由参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#依赖注入-路由参数"}},[e._v("#")]),e._v(" 依赖注入 & 路由参数")]),e._v(" "),a("p",[e._v("如果控制器方法要从路由参数中获取数据，则应在其他依赖项之后列出路由参数。例如，如果你的路由是这样定义的：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Route::put('user/{id}', 'UserController@update');\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("如下所示使用提示类 "),a("code",[e._v("Illuminate\\Http\\Request")]),e._v(" ，就可以在控制器方法中获得路由参数 "),a("code",[e._v("id")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<?php\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Http\\Request;\n\nclass UserController extends Controller\n{\n    /**\n     * 更新某个用户\n     *\n     * @param  Request  $request\n     * @param  string  $id\n     * @return Response\n     */\n    public function update(Request $request, $id)\n    {\n        //\n    }\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br")])]),a("h3",{attrs:{id:"通过路由闭包获取请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过路由闭包获取请求"}},[e._v("#")]),e._v(" 通过路由闭包获取请求")]),e._v(" "),a("p",[e._v("你也同样可以在路由闭包中使用 "),a("code",[e._v("Illuminate\\Http\\Request")]),e._v(" 类. 程序在执行的时候，服务容器会自动的将请求注入到路由闭包中：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("use Illuminate\\Http\\Request;\n\nRoute::get('/', function (Request $request) {\n    //\n});\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h3",{attrs:{id:"请求路径-方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求路径-方法"}},[e._v("#")]),e._v(" 请求路径 & 方法")]),e._v(" "),a("p",[a("code",[e._v("Illuminate\\Http\\Request")]),e._v(" 实例为你的应用程序提供了一系列方法检查路由，并且继承了 "),a("code",[e._v("Symfony\\Component\\HttpFoundation\\Request")]),e._v(" 类。 以下是该类的一些重要用法：")]),e._v(" "),a("h3",{attrs:{id:"获取请求路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取请求路径"}},[e._v("#")]),e._v(" 获取请求路径")]),e._v(" "),a("p",[a("code",[e._v("path")]),e._v(" 方法返回请求的路径信息。也就是说，如果传入的请求的目标地址是 "),a("code",[e._v("http://domain.com/foo/bar")]),e._v("，那么 "),a("code",[e._v("path")]),e._v(" 将会返回 "),a("code",[e._v("foo/bar")]),e._v("：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$uri = $request->path();\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("code",[e._v("is")]),e._v(" 方法可以验证传入的请求路径和指定规则是否匹配。使用这个方法的时，你也可以传递一个 "),a("code",[e._v("*")]),e._v(" 字符作为通配符：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("if ($request->is('admin/*')) {\n    //\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h3",{attrs:{id:"获取请求的-url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取请求的-url"}},[e._v("#")]),e._v(" 获取请求的 URL")]),e._v(" "),a("p",[e._v("你可以使用 "),a("code",[e._v("url")]),e._v(" 或 "),a("code",[e._v("fullUrl")]),e._v(" 方法去获取传入请求的完整 "),a("code",[e._v("URL")]),e._v("。"),a("code",[e._v("url")]),e._v(" 方法返回不带有查询字符串的 "),a("code",[e._v("URL")]),e._v("，而 "),a("code",[e._v("fullUrl")]),e._v(" 方法的返回值包含查询字符串：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// 没有查询字符串...\n$url = $request->url();\n\n// 使用查询字符串...\n$url = $request->fullUrl();\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h3",{attrs:{id:"获取请求方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取请求方法"}},[e._v("#")]),e._v(" 获取请求方法")]),e._v(" "),a("p",[e._v("对于传入的请求 "),a("code",[e._v("method")]),e._v(" 方法将返回 "),a("code",[e._v("HTTP")]),e._v(" 的请求方式。你也可以使用 "),a("code",[e._v("isMethod")]),e._v(" 方法去验证 "),a("code",[e._v("HTTP")]),e._v(" 的请求方式与指定规则是否相配：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$method = $request->method();\n\nif ($request->isMethod('post')) {\n    //\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h3",{attrs:{id:"获取输入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取输入"}},[e._v("#")]),e._v(" 获取输入")]),e._v(" "),a("h3",{attrs:{id:"获取所有输入数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取所有输入数据"}},[e._v("#")]),e._v(" 获取所有输入数据")]),e._v(" "),a("p",[e._v("你可以使用 "),a("code",[e._v("all")]),e._v(" 方法以 "),a("code",[e._v("array")]),e._v(" 形式获取到所有输入数据:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$input = $request->all();\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"获取指定输入值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取指定输入值"}},[e._v("#")]),e._v(" 获取指定输入值")]),e._v(" "),a("p",[e._v("使用几种简单的方法（不需要特别指定哪个 HTTP 动作），就可以访问 "),a("code",[e._v("Illuminate\\Http\\Request")]),e._v(" 实例中所有的用户输入。也就是说无论是什么样的 HTTP 动作，"),a("code",[e._v("input")]),e._v(" 方法都可以被用来获取用户输入数据：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$name = $request->input('name');\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("你可以给 "),a("code",[e._v("input")]),e._v(" 方法的第二个参数传入一个默认值。如果请求的输入值不存在请求上，就返回默认值：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$name = $request->input('name', 'Sally');\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("如果传输表单数据中包含「数组」形式的数据，那么可以使用「点」式语法来获取数组：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$name = $request->input('products.0.name');\n\n$names = $request->input('products.*.name');\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h3",{attrs:{id:"从查询字符串获取输入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从查询字符串获取输入"}},[e._v("#")]),e._v(" 从查询字符串获取输入")]),e._v(" "),a("p",[e._v("使用 "),a("code",[e._v("input")]),e._v(" 方法可以从整个请求中获取输入数据（包括查询字符串），而 "),a("code",[e._v("query")]),e._v(" 方法可以只从查询字符串中获取输入数据：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$name = $request->query('name');\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("如果请求的查询字符串数据不存在，则将返回这个方法的第二个参数：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$name = $request->query('name', 'Helen');\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("你可以不提供参数调用 "),a("code",[e._v("query")]),e._v(" 方法来以关联数组的形式检索所有查询字符串值：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$query = $request->query();\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"通过动态属性获取输入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过动态属性获取输入"}},[e._v("#")]),e._v(" 通过动态属性获取输入")]),e._v(" "),a("p",[e._v("你也可以通过 "),a("code",[e._v("Illuminate\\Http\\Request")]),e._v(" 实例的动态属性来获取用户输入。例如，如果你应用的表单中包含 "),a("code",[e._v("name")]),e._v("字段，那么可以像这样访问该字段的值：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$name = $request->name;\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("Laravel 在处理动态属性的优先级是，先在请求的数据中查找，如果没有，再到路由参数中查找。")]),e._v(" "),a("h3",{attrs:{id:"获取-json-输入信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取-json-输入信息"}},[e._v("#")]),e._v(" 获取 JSON 输入信息")]),e._v(" "),a("p",[e._v("如果发送到应用程序的请求数据是 JSON，只要请求的 "),a("code",[e._v("Content-Type")]),e._v(" 标头正确设置为 "),a("code",[e._v("application/json")]),e._v("，就可以通过 "),a("code",[e._v("input")]),e._v(" 方法访问 "),a("code",[e._v("JSON")]),e._v(" 数据。你甚至可以使用 「点」式语法来读取 "),a("code",[e._v("JSON")]),e._v(" 数组：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$name = $request->input('user.name');\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"获取部分输入数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取部分输入数据"}},[e._v("#")]),e._v(" 获取部分输入数据")]),e._v(" "),a("p",[e._v("如果你需要获取输入数据的子集，则可以用 "),a("code",[e._v("only")]),e._v(" 和 "),a("code",[e._v("except")]),e._v(" 方法。这两个方法都接收 "),a("code",[e._v("array")]),e._v(" 或动态列表作为参数：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$input = $request->only(['username', 'password']);\n\n$input = $request->only('username', 'password');\n\n$input = $request->except(['credit_card']);\n\n$input = $request->except('credit_card');\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("blockquote",[a("p",[a("code",[e._v("only")]),e._v(" 方法会返回所有你指定的键值对，但不会返回请求中不存在的键值对。")])]),e._v(" "),a("h3",{attrs:{id:"确定是否存在输入值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#确定是否存在输入值"}},[e._v("#")]),e._v(" 确定是否存在输入值")]),e._v(" "),a("p",[e._v("要判断请求是否存在某个值，可以使用 "),a("code",[e._v("has")]),e._v(" 方法。如果请求中存在该值，"),a("code",[e._v("has")]),e._v(" 方法就会返回 "),a("code",[e._v("true")]),e._v("：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("if ($request->has('name')) {\n    //\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("当提供一个数组作为参数时，"),a("code",[e._v("has")]),e._v(" 方法将确定是否存在数组中所有给定的值：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("if ($request->has(['name', 'email'])) {\n    //\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("如果你想确定请求中是否存在值并且不为空，可以使用 "),a("code",[e._v("filled")]),e._v(" 方法：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("if ($request->filled('name')) {\n    //\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h3",{attrs:{id:"cookies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookies"}},[e._v("#")]),e._v(" Cookies")]),e._v(" "),a("h3",{attrs:{id:"从请求中获取-cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从请求中获取-cookie"}},[e._v("#")]),e._v(" 从请求中获取 Cookie")]),e._v(" "),a("p",[a("code",[e._v("Laravel")]),e._v(" 框架创建的每个 "),a("code",[e._v("cookie")]),e._v(" 都会被加密并使用验证码进行签名，这意味着如果客户端更改了它们，便视为无效。若要从请求中获取 "),a("code",[e._v("cookie")]),e._v(" 值，你可以在 "),a("code",[e._v("Illuminate\\Http\\Request")]),e._v(" 实例上使用 "),a("code",[e._v("cookie")]),e._v(" 方法：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$value = $request->cookie('name');\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("或者，您可以使用 "),a("code",[e._v("Cookie Facade")]),e._v(" 来访问 "),a("code",[e._v("cookie")]),e._v(" 的值：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$value = Cookie::get('name');\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件"}},[e._v("#")]),e._v(" 文件")]),e._v(" "),a("h3",{attrs:{id:"获取上传文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取上传文件"}},[e._v("#")]),e._v(" 获取上传文件")]),e._v(" "),a("p",[e._v("你可以使用 "),a("code",[e._v("file")]),e._v(" 方法或使用动态属性从 "),a("code",[e._v("Illuminate\\Http\\Request")]),e._v(" 实例中访问上传的文件。该 "),a("code",[e._v("file")]),e._v(" 方法返回一个 "),a("code",[e._v("Illuminate\\Http\\UploadedFile")]),e._v(" 类的实例，该类继承了 "),a("code",[e._v("PHP")]),e._v(" 的 "),a("code",[e._v("SplFileInfo")]),e._v(" 类的同时也提供了各种与文件交互的方法：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$file = $request->file('photo');\n\n$file = $request->photo;\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("你可以使用 "),a("code",[e._v("hasFile")]),e._v(" 方法确认请求中是否存在文件：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("if ($request->hasFile('photo')) {\n    //\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h3",{attrs:{id:"验证成功上传"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证成功上传"}},[e._v("#")]),e._v(" 验证成功上传")]),e._v(" "),a("p",[e._v("除了检查上传的文件是否存在外，你也可以通过 "),a("code",[e._v("isValid")]),e._v(" 方法验证上传的文件是否有效：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("if ($request->file('photo')->isValid()) {\n    //\n}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h3",{attrs:{id:"文件路径-扩展名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件路径-扩展名"}},[e._v("#")]),e._v(" 文件路径 & 扩展名")]),e._v(" "),a("p",[a("code",[e._v("UploadedFile")]),e._v(" 类还包含访问文件的完整路径及其扩展名方法。"),a("code",[e._v("extension")]),e._v(" 方法会根据文件内容判断文件的扩展名。该扩展名可能会和客户端提供的扩展名不同：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$path = $request->photo->path();\n\n$extension = $request->photo->extension();\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h1",{attrs:{id:"响应对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#响应对象"}},[e._v("#")]),e._v(" 响应对象")]),e._v(" "),a("h3",{attrs:{id:"返回字符串或者数组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#返回字符串或者数组"}},[e._v("#")]),e._v(" 返回字符串或者数组")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Route::get('/', function () {\n    return 'Hello World';\n});\n\n\nRoute::get('/', function () {\n    return [1, 2, 3];\n});\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br")])]),a("h3",{attrs:{id:"响应对象-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#响应对象-2"}},[e._v("#")]),e._v(" 响应对象")]),e._v(" "),a("p",[e._v("一般来说，你不会只从路由行为返回简单的字符串或数组。你也许会返回完整的 "),a("code",[e._v("Illuminate\\Http\\Response")]),e._v(" 实例或视图")]),e._v(" "),a("p",[e._v("返回完整的 "),a("code",[e._v("Response")]),e._v(" 实例允许你自定义响应的 "),a("code",[e._v("HTTP")]),e._v(" 状态码和响应头信息。"),a("code",[e._v("Response")]),e._v(" 实例继承自 "),a("code",[e._v("Symfony\\Component\\HttpFoundation\\Response")]),e._v(" 类，该类提供了各种构建 "),a("code",[e._v("HTTP")]),e._v(" 响应的方法：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Route::get('home', function () {\n    return response('Hello World', 200)\n                  ->header('Content-Type', 'text/plain');\n});\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("h3",{attrs:{id:"为响应增加头信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为响应增加头信息"}},[e._v("#")]),e._v(" 为响应增加头信息")]),e._v(" "),a("p",[e._v("大部分的响应方法都是可链式调用的，使得创建响应实例的过程更具可读性。例如，你可以在响应返回给用户前使用 "),a("code",[e._v("header")]),e._v(" 方法为其添加一系列的头信息：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("return response($content)\n    ->header('Content-Type', $type)\n    ->header('X-Header-One', 'Header Value')\n    ->header('X-Header-Two', 'Header Value');\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("p",[e._v("或者，你可以使用 "),a("code",[e._v("withHeaders")]),e._v(" 方法来指定要添加到响应的头信息数组：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("return response($content)\n    ->withHeaders([\n        'Content-Type' => $type,\n        'X-Header-One' => 'Header Value',\n        'X-Header-Two' => 'Header Value',\n    ]);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("h3",{attrs:{id:"为响应增加-cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为响应增加-cookie"}},[e._v("#")]),e._v(" 为响应增加 Cookie")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("return response($content)\n    ->header('Content-Type', $type)\n    ->cookie('name', 'value', $minutes);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h3",{attrs:{id:"重定向"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重定向"}},[e._v("#")]),e._v(" 重定向")]),e._v(" "),a("p",[e._v("重定向响应是 "),a("code",[e._v("Illuminate\\Http\\RedirectResponse")]),e._v(" 类的实例，并且包含用户需要重定向至另一个 "),a("code",[e._v("URL")]),e._v(" 所需的头信息。"),a("code",[e._v("Laravel")]),e._v(" 提供了几种方法用于生成 "),a("code",[e._v("RedirectResponse")]),e._v(" 实例。其中最简单的方法是使用全局辅助函数 "),a("code",[e._v("redirect")]),e._v("：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Route::get('dashboard', function () {\n    return redirect('home/dashboard');\n});\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("有时候你可能希望将用户重定向到之前的位置，比如提交的表单无效时。这时你可以使用全局辅助函数 "),a("code",[e._v("back")]),e._v(" 来执行此操作。由于这个功能利用了 "),a("code",[e._v("Session")]),e._v("，请确保调用 "),a("code",[e._v("back")]),e._v(" 函数的路由使用 "),a("code",[e._v("web")]),e._v(" 中间件组或所有 "),a("code",[e._v("Session")]),e._v(" 中间件：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Route::post('user/profile', function () {\n    // Validate the request...\n\n    return back()->withInput();\n});\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h3",{attrs:{id:"重定向至命名路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重定向至命名路由"}},[e._v("#")]),e._v(" 重定向至命名路由")]),e._v(" "),a("p",[e._v("当你不带参数调用辅助函数 "),a("code",[e._v("redirect")]),e._v(" 时，会返回 "),a("code",[e._v("Illuminate\\Routing\\Redirector")]),e._v(" 实例。这个实例允许你调用 "),a("code",[e._v("Redirector")]),e._v(" 上的任何方法。例如为命名路由生成 "),a("code",[e._v("RedirectResponse")]),e._v("，可以使用 "),a("code",[e._v("route")]),e._v(" 方法：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("return redirect()->route('login');\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("如果你的路由有参数，你可以把它们作为 "),a("code",[e._v("route")]),e._v(" 方法的第二个参数来传递：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// 对于具有以下 URI 的路由: profile/{id}\n\nreturn redirect()->route('profile', ['id' => 1]);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h3",{attrs:{id:"重定向至控制器行为"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重定向至控制器行为"}},[e._v("#")]),e._v(" 重定向至控制器行为")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("return redirect()->action('HomeController@index');\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("如果你的控制器路由需要参数，你可以将它们作为第二个参数传递给 "),a("code",[e._v("action")]),e._v(" 方法：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("return redirect()->action(\n    'UserController@profile', ['id' => 1]\n);\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h3",{attrs:{id:"重定向到外部域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重定向到外部域"}},[e._v("#")]),e._v(" 重定向到外部域")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("return redirect()->away('https://www.google.com');\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])])])}),[],!1,null,null,null);s.default=n.exports}}]);