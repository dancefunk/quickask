import{_ as n,p as s,q as a,Y as t}from"./framework-aa5c4115.js";const e="/assets/ajax3-c3b1bd82.png",p="/assets/ajax4-4e6cdb20.png",o="/assets/ajax5-c4bd1750.png",c={},l=t('<h3 id="ajax" tabindex="-1"><a class="header-anchor" href="#ajax" aria-hidden="true">#</a> Ajax</h3><p><img src="'+e+`" alt="ajax3"></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>Ajax 的全称是 Asynchronous JavaScript And XML (异步Javascript和XML)
它不是一项新的技术,而是由多种技术组合而成,是一种异步请求方式
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="xmlhttprequest对象" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest对象" aria-hidden="true">#</a> XMLHttpRequest对象</h3><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code>XMLhttpRequest对象是整个Ajax开发的基础<span class="token punctuation">,</span>它提供了客户端和服务器端进行异步通信的能力
一方面它向服务器提交一个请求，获取指定页面的内容，另一方面将指定的数据提交到服务器
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ajax请求过程" tabindex="-1"><a class="header-anchor" href="#ajax请求过程" aria-hidden="true">#</a> Ajax请求过程</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//创建异步对象</span>
<span class="token keyword">var</span> ajax <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 创建一个异步请求</span>
ajax<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;http://demo.com/test.php?id=1&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

<span class="token comment">// 发送异步请求</span>
<span class="token comment">//get</span>
ajax<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;http://demo.com/test.php?id=1&quot;</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>
ajax<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    
<span class="token comment">//post 需要设置头信息</span>
ajax<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation">)</span>
ajax<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;http://demo.com/test.php?id=1&quot;</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>
ajax<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;username=demo&amp;sex=boy&amp;age=30&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//绑定异步请求状态变化事件</span>
ajax<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// readyState的值表示当前请求的状态</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ajax<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// status存储服务器端返回的HTTP请求响应代码,它表⽰请求的处理结果</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>ajax<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">//请求成功，接收服务器返回结果</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ajax<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span>
        <span class="token punctuation">{</span>
            <span class="token comment">//⽹络失败或服务器错误</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;请求失败&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="创建一个请求" tabindex="-1"><a class="header-anchor" href="#创建一个请求" aria-hidden="true">#</a> 创建一个请求</h4><blockquote><p>open(method, url, asynchronous, user, password);</p></blockquote><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">Method</td><td style="text-align:left;">指定请求类型,一般为get或者post</td></tr><tr><td style="text-align:left;">url</td><td style="text-align:left;">指定请求的地址,可以是绝对地址或者相对地址,可以附带查询字符串</td></tr><tr><td style="text-align:left;">Asynchronous</td><td style="text-align:left;">(可选)表示请求是同步还是异步,同步请求为false, 异步为true,默认为true</td></tr><tr><td style="text-align:left;">User</td><td style="text-align:left;">(可选)指定请求的用户名</td></tr><tr><td style="text-align:left;">Password</td><td style="text-align:left;">(可选) 指定请求密码</td></tr></tbody></table><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code>ajax<span class="token operator">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;get&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;http://demo.com/test.php?id=1&quot;</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="发送请求" tabindex="-1"><a class="header-anchor" href="#发送请求" aria-hidden="true">#</a> 发送请求</h4><blockquote><p>send(content)</p></blockquote><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">content</td><td style="text-align:left;">它表示要向服务器发送的数据,其格式为查询字符串形式;如果不发送任何参数可以使用<code>null</code></td></tr></tbody></table><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code>如果<span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法中用post方式提交请求<span class="token punctuation">,</span>那么在send之前使用如下语句设置<span class="token constant">HTTP</span>头<span class="token punctuation">:</span>
ajax<span class="token operator">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation">)</span>
    
<span class="token comment">//get</span>
ajax<span class="token operator">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;get&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;http://demo.com/test.php?id=1&quot;</span><span class="token punctuation">,</span><span class="token constant boolean">false</span><span class="token punctuation">)</span>
ajax<span class="token operator">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token constant">null</span><span class="token punctuation">)</span>
    
<span class="token comment">//post</span>
ajax<span class="token operator">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation">)</span>
ajax<span class="token operator">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;post&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;http://demo.com/test.php?id=1&quot;</span><span class="token punctuation">,</span><span class="token constant boolean">false</span><span class="token punctuation">)</span>
ajax<span class="token operator">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;username=demo&amp;sex=boy&amp;age=30&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="判断请求状态和结果" tabindex="-1"><a class="header-anchor" href="#判断请求状态和结果" aria-hidden="true">#</a> 判断请求状态和结果</h4><blockquote><p>readyState状态</p></blockquote><p><img src="`+p+'" alt="ajax4"></p><blockquote><p>status状态</p></blockquote><p><img src="'+o+`" alt="ajax5"></p><h3 id="jqueryajax" tabindex="-1"><a class="header-anchor" href="#jqueryajax" aria-hidden="true">#</a> JqueryAjax</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>通过 <span class="token constant">HTTP</span> 请求加载远程数据
jQuery 底层 <span class="token constant">AJAX</span> 实现。简单易用的高层实现见 $<span class="token punctuation">.</span>get<span class="token punctuation">,</span> $<span class="token punctuation">.</span>getJSON<span class="token punctuation">,</span> $<span class="token punctuation">.</span>post等
$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 返回其创建的 XMLHttpRequest对象
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">//一个Ajax过程  </span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>  <span class="token comment">//以post方式与后台沟通</span>
  <span class="token literal-property property">url</span> <span class="token operator">:</span> <span class="token string">&quot;login.php&quot;</span><span class="token punctuation">,</span> <span class="token comment">//与此php页面沟通</span>
  <span class="token literal-property property">dataType</span><span class="token operator">:</span><span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span><span class="token comment">//从php返回的值以 JSON方式 解释</span>
  <span class="token comment">//发给php的数据有两项username和password </span>
  <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token string">&#39;username=&#39;</span><span class="token operator">+</span>username<span class="token operator">+</span><span class="token string">&#39;&amp;password=&#39;</span><span class="token operator">+</span>password<span class="token punctuation">,</span> 
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">json</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//如果调用php成功</span>
      <span class="token comment">//把php中的返回值（json.username）给 alert出来</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>username<span class="token operator">+</span><span class="token string">&#39;\\n&#39;</span><span class="token operator">+</span>json<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token comment">//打印错误信息</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,23),i=[l];function u(d,r){return s(),a("div",null,i)}const m=n(c,[["render",u],["__file","02.html.vue"]]);export{m as default};
