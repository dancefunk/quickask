import{_ as n,o as s,c as a,a as t}from"./app-3c87854f.js";const e={},l=t(`<h3 id="php操作mysql函数" tabindex="-1"><a class="header-anchor" href="#php操作mysql函数" aria-hidden="true">#</a> PHP操作Mysql函数</h3><table><thead><tr><th style="text-align:left;">函数</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">mysqli_connect</td><td style="text-align:left;">建立数据库连接</td></tr><tr><td style="text-align:left;">mysqli_connect_error</td><td style="text-align:left;">连接数据库错误信息</td></tr><tr><td style="text-align:left;">mysqli_close</td><td style="text-align:left;">关闭连接</td></tr><tr><td style="text-align:left;">mysqli_select_db</td><td style="text-align:left;">选择数据库</td></tr><tr><td style="text-align:left;">mysqli_set_charset</td><td style="text-align:left;">设置编码</td></tr><tr><td style="text-align:left;">mysqli_query</td><td style="text-align:left;">执行语句</td></tr><tr><td style="text-align:left;">mysqli_fetch_all</td><td style="text-align:left;">返回全部类型数据</td></tr><tr><td style="text-align:left;">mysqli_fetch_assoc</td><td style="text-align:left;">返回关联数组类型数据</td></tr><tr><td style="text-align:left;">mysqli_num_rows</td><td style="text-align:left;">返回查询总数</td></tr><tr><td style="text-align:left;">mysqli_insert_id</td><td style="text-align:left;">返回自增ID</td></tr><tr><td style="text-align:left;">mysqli_affected_rows</td><td style="text-align:left;">返回影响行数</td></tr></tbody></table><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token comment">//链接数据库</span>
<span class="token variable">$link</span> <span class="token operator">=</span> @<span class="token function">mysqli_connect</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;localhost&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//链接数据库失败</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$link</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;链接数据库失败：&quot;</span><span class="token operator">.</span><span class="token function">mysqli_connect_error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">exit</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 选择数据库</span>
<span class="token variable">$SelectDB</span> <span class="token operator">=</span> <span class="token function">mysqli_select_db</span><span class="token punctuation">(</span><span class="token variable">$link</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;company&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$SelectDB</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;选择数据库失败&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">exit</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//设置编码</span>
<span class="token function">mysqli_set_charset</span><span class="token punctuation">(</span><span class="token variable">$link</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;utf8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//查询数据</span>
<span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;SELECT * FROM pre_person&quot;</span><span class="token punctuation">;</span>

<span class="token comment">//执行sql语句</span>
<span class="token variable">$res</span> <span class="token operator">=</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$link</span><span class="token punctuation">,</span> <span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//获取数据</span>
<span class="token variable">$row</span> <span class="token operator">=</span>  <span class="token function">mysqli_fetch_assoc</span><span class="token punctuation">(</span><span class="token variable">$res</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$row</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 返回查询总条数</span>
<span class="token variable">$count</span> <span class="token operator">=</span> <span class="token function">mysqli_num_rows</span><span class="token punctuation">(</span><span class="token variable">$res</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$count</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//返回插入的自增ID</span>
<span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;INSERT INTO pre_person(\`name\`,\`mobile\`,\`email\`)VALUES(&#39;张三&#39;, &#39;1388888888&#39;, &#39;123123@qq.com&#39;)&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$res</span> <span class="token operator">=</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$link</span><span class="token punctuation">,</span> <span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$insertid</span> <span class="token operator">=</span> <span class="token function">mysqli_insert_id</span><span class="token punctuation">(</span><span class="token variable">$link</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$insertid</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//删除语句和更新语句都可以用返回影响行数来判断是否操作成功</span>
<span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;DELETE FROM pre_person WHERE id = 47&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$res</span> <span class="token operator">=</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$link</span><span class="token punctuation">,</span> <span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$affect</span> <span class="token operator">=</span> <span class="token function">mysqli_affected_rows</span><span class="token punctuation">(</span><span class="token variable">$link</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$affect</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),p=[l];function o(i,c){return s(),a("div",null,p)}const r=n(e,[["render",o],["__file","01.html.vue"]]);export{r as default};
